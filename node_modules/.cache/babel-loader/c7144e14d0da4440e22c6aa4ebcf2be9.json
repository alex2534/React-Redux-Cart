{"ast":null,"code":"var _jsxFileName = \"/Users/alexnascimento/Desktop/React-Redux-side-Efect/src/App.js\",\n    _s = $RefreshSig$();\n\n/** @format */\nimport { useEffect, Fragment } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport Cart from \"./components/Cart/Cart\";\nimport Layout from \"./components/Layout/Layout\";\nimport Products from \"./components/Shop/Products\";\nimport { uiActions } from \"./store/ui-slice\";\nimport Notification from \"./components/UI/Notification\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  let isInital = true;\n  const dispatch = useDispatch();\n  /*To use useSelector we have to pass a funciton to it and the function receives \n   the readux-state automatic because this function will be executed by react-redux\n   and then we shold pass the data we want to use in this component and in this case \n   it is the cartIsVisible value and this is  (state.ui.cartIsVisible) the way we extract the value we need\n   */\n\n  const showCart = useSelector(state => state.ui.cartIsVisible);\n  const cart = useSelector(state => state.cart);\n  const notification = useSelector(state => state.ui.notification);\n  useEffect(() => {\n    const sendCartData = async () => {\n      dispatch(uiActions.showNotification({\n        status: \"pending\",\n        title: \"Sending...\",\n        message: \"Sending cart data!\"\n      }));\n      const response = fetch(\"https://react-http-6ff2e-default-rtdb.firebaseio.com/cart.json\", {\n        method: \"PUT\",\n        body: JSON.stringify(cart)\n      });\n\n      if (!response.ok) {\n        throw new Error(\"Sending cart data failed\");\n      }\n\n      dispatch(uiActions.showNotification({\n        status: \"success\",\n        title: \"Success!\",\n        message: \"Sending cart data successfully!\"\n      }));\n    }; // if (isInital) {\n    // \tisInital = false;\n    // \treturn;\n    // }\n\n\n    sendCartData().catch(error => {\n      dispatch(uiActions.showNotification({\n        status: \"error\",\n        title: \"Error\",\n        message: \"Sending cart data failed!\"\n      }));\n    });\n  }, [cart, dispatch]);\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: [notification && /*#__PURE__*/_jsxDEV(Notification, {\n      status: notification.status,\n      title: notification.title,\n      message: notification.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(Layout, {\n      children: [showCart && /*#__PURE__*/_jsxDEV(Cart, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 18\n      }, this), /*#__PURE__*/_jsxDEV(Products, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 3\n  }, this);\n}\n\n_s(App, \"ym533N9pcV2ZQROugfAj7yssIY8=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useSelector];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/alexnascimento/Desktop/React-Redux-side-Efect/src/App.js"],"names":["useEffect","Fragment","useSelector","useDispatch","Cart","Layout","Products","uiActions","Notification","App","isInital","dispatch","showCart","state","ui","cartIsVisible","cart","notification","sendCartData","showNotification","status","title","message","response","fetch","method","body","JSON","stringify","ok","Error","catch","error"],"mappings":";;;AAAA;AACA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AAEA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,MAAP,MAAmB,4BAAnB;AACA,OAAOC,QAAP,MAAqB,4BAArB;AACA,SAASC,SAAT,QAA0B,kBAA1B;AACA,OAAOC,YAAP,MAAyB,8BAAzB;;;AAEA,SAASC,GAAT,GAAe;AAAA;;AACd,MAAIC,QAAQ,GAAG,IAAf;AACA,QAAMC,QAAQ,GAAGR,WAAW,EAA5B;AACA;AACD;AACA;AACA;AACA;;AACC,QAAMS,QAAQ,GAAGV,WAAW,CAAEW,KAAD,IAAWA,KAAK,CAACC,EAAN,CAASC,aAArB,CAA5B;AACA,QAAMC,IAAI,GAAGd,WAAW,CAAEW,KAAD,IAAWA,KAAK,CAACG,IAAlB,CAAxB;AACA,QAAMC,YAAY,GAAGf,WAAW,CAAEW,KAAD,IAAWA,KAAK,CAACC,EAAN,CAASG,YAArB,CAAhC;AAEAjB,EAAAA,SAAS,CAAC,MAAM;AACf,UAAMkB,YAAY,GAAG,YAAY;AAChCP,MAAAA,QAAQ,CACPJ,SAAS,CAACY,gBAAV,CAA2B;AAC1BC,QAAAA,MAAM,EAAE,SADkB;AAE1BC,QAAAA,KAAK,EAAE,YAFmB;AAG1BC,QAAAA,OAAO,EAAE;AAHiB,OAA3B,CADO,CAAR;AAOA,YAAMC,QAAQ,GAAGC,KAAK,CACrB,gEADqB,EAErB;AACCC,QAAAA,MAAM,EAAE,KADT;AAECC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeZ,IAAf;AAFP,OAFqB,CAAtB;;AAOA,UAAI,CAACO,QAAQ,CAACM,EAAd,EAAkB;AACjB,cAAM,IAAIC,KAAJ,CAAU,0BAAV,CAAN;AACA;;AACDnB,MAAAA,QAAQ,CACPJ,SAAS,CAACY,gBAAV,CAA2B;AAC1BC,QAAAA,MAAM,EAAE,SADkB;AAE1BC,QAAAA,KAAK,EAAE,UAFmB;AAG1BC,QAAAA,OAAO,EAAE;AAHiB,OAA3B,CADO,CAAR;AAOA,KAzBD,CADe,CA4Bf;AACA;AACA;AACA;;;AACAJ,IAAAA,YAAY,GAAGa,KAAf,CAAsBC,KAAD,IAAW;AAC/BrB,MAAAA,QAAQ,CACPJ,SAAS,CAACY,gBAAV,CAA2B;AAC1BC,QAAAA,MAAM,EAAE,OADkB;AAE1BC,QAAAA,KAAK,EAAE,OAFmB;AAG1BC,QAAAA,OAAO,EAAE;AAHiB,OAA3B,CADO,CAAR;AAOA,KARD;AASA,GAzCQ,EAyCN,CAACN,IAAD,EAAOL,QAAP,CAzCM,CAAT;AA2CA,sBACC,QAAC,QAAD;AAAA,eACEM,YAAY,iBACZ,QAAC,YAAD;AACC,MAAA,MAAM,EAAEA,YAAY,CAACG,MADtB;AAEC,MAAA,KAAK,EAAEH,YAAY,CAACI,KAFrB;AAGC,MAAA,OAAO,EAAEJ,YAAY,CAACK;AAHvB;AAAA;AAAA;AAAA;AAAA,YAFF,eAQC,QAAC,MAAD;AAAA,iBAEEV,QAAQ,iBAAI,QAAC,IAAD;AAAA;AAAA;AAAA;AAAA,cAFd,eAGC,QAAC,QAAD;AAAA;AAAA;AAAA;AAAA,cAHD;AAAA;AAAA;AAAA;AAAA;AAAA,YARD;AAAA;AAAA;AAAA;AAAA;AAAA,UADD;AAgBA;;GAvEQH,G;UAESN,W,EAMAD,W,EACJA,W,EACQA,W;;;KAVbO,G;AAyET,eAAeA,GAAf","sourcesContent":["/** @format */\nimport { useEffect, Fragment } from \"react\";\n\nimport { useSelector, useDispatch } from \"react-redux\";\nimport Cart from \"./components/Cart/Cart\";\nimport Layout from \"./components/Layout/Layout\";\nimport Products from \"./components/Shop/Products\";\nimport { uiActions } from \"./store/ui-slice\";\nimport Notification from \"./components/UI/Notification\";\n\nfunction App() {\n\tlet isInital = true;\n\tconst dispatch = useDispatch();\n\t/*To use useSelector we have to pass a funciton to it and the function receives \n  the readux-state automatic because this function will be executed by react-redux\n  and then we shold pass the data we want to use in this component and in this case \n  it is the cartIsVisible value and this is  (state.ui.cartIsVisible) the way we extract the value we need\n  */\n\tconst showCart = useSelector((state) => state.ui.cartIsVisible);\n\tconst cart = useSelector((state) => state.cart);\n\tconst notification = useSelector((state) => state.ui.notification);\n\n\tuseEffect(() => {\n\t\tconst sendCartData = async () => {\n\t\t\tdispatch(\n\t\t\t\tuiActions.showNotification({\n\t\t\t\t\tstatus: \"pending\",\n\t\t\t\t\ttitle: \"Sending...\",\n\t\t\t\t\tmessage: \"Sending cart data!\",\n\t\t\t\t})\n\t\t\t);\n\t\t\tconst response = fetch(\n\t\t\t\t\"https://react-http-6ff2e-default-rtdb.firebaseio.com/cart.json\",\n\t\t\t\t{\n\t\t\t\t\tmethod: \"PUT\",\n\t\t\t\t\tbody: JSON.stringify(cart),\n\t\t\t\t}\n\t\t\t);\n\t\t\tif (!response.ok) {\n\t\t\t\tthrow new Error(\"Sending cart data failed\");\n\t\t\t}\n\t\t\tdispatch(\n\t\t\t\tuiActions.showNotification({\n\t\t\t\t\tstatus: \"success\",\n\t\t\t\t\ttitle: \"Success!\",\n\t\t\t\t\tmessage: \"Sending cart data successfully!\",\n\t\t\t\t})\n\t\t\t);\n\t\t};\n\n\t\t// if (isInital) {\n\t\t// \tisInital = false;\n\t\t// \treturn;\n\t\t// }\n\t\tsendCartData().catch((error) => {\n\t\t\tdispatch(\n\t\t\t\tuiActions.showNotification({\n\t\t\t\t\tstatus: \"error\",\n\t\t\t\t\ttitle: \"Error\",\n\t\t\t\t\tmessage: \"Sending cart data failed!\",\n\t\t\t\t})\n\t\t\t);\n\t\t});\n\t}, [cart, dispatch]);\n\n\treturn (\n\t\t<Fragment>\n\t\t\t{notification && (\n\t\t\t\t<Notification\n\t\t\t\t\tstatus={notification.status}\n\t\t\t\t\ttitle={notification.title}\n\t\t\t\t\tmessage={notification.message}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t<Layout>\n\t\t\t\t{/* and that's how we use it in here to show or hide the cart component */}\n\t\t\t\t{showCart && <Cart />}\n\t\t\t\t<Products />\n\t\t\t</Layout>\n\t\t</Fragment>\n\t);\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}